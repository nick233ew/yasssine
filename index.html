<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Yassine
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
            font-family: 'Roboto', sans-serif;
        }
  </style>
 </head>
 <body class="bg-gray-100">
  <div class="min-h-screen flex">
   <!-- Sidebar -->
   <div class="w-1/4 bg-white p-6 border-r border-gray-200">
    <div class="mb-8">
     <h1 class="text-3xl font-bold text-blue-500">
      Yassine
     </h1>
    </div>
    <nav>
     <ul>
      <li class="mb-4">
       <a class="flex items-center text-gray-700 hover:text-blue-500" href="#" onclick="showHome()">
        <i class="fas fa-home mr-3">
        </i>
        <span>
         Home
        </span>
       </a>
      </li>
      <li class="mb-4">
       <a class="flex items-center text-gray-700 hover:text-blue-500" href="#" onclick="showExplore()">
        <i class="fas fa-hashtag mr-3">
        </i>
        <span>
         Explore
        </span>
       </a>
      </li>
     </ul>
    </nav>
    <button class="mt-6 w-full bg-blue-500 text-white py-2 rounded-full" onclick="postTweet()">
     Tweet
    </button>
    <div class="mt-6">
     <input accept="image/*" id="profileImageInput" onchange="uploadProfileImage(event)" type="file"/>
    </div>
   </div>
   <!-- Main Content -->
   <div class="w-1/2 p-6">
    <div class="border-b border-gray-200 pb-4 mb-4">
     <h2 class="text-xl font-bold" id="mainTitle">
      Home
     </h2>
    </div>
    <div class="mb-6" id="tweetBox">
     <div class="flex">
      <img alt="User profile picture" class="rounded-full mr-4" height="50" id="currentProfileImage" src="https://storage.googleapis.com/a1aa/image/ZsK1dGHR9NL2AZSKyk6VFSFwD8Lp5DaxVwMm5wAvsLr5ax7E.jpg" width="50"/>
      <textarea class="w-full p-2 border border-gray-300 rounded-lg" id="tweetContent" placeholder="What's happening?" rows="3"></textarea>
     </div>
     <div class="flex justify-end mt-2">
      <button class="bg-blue-500 text-white py-2 px-4 rounded-full" onclick="postTweet()">
       Tweet
      </button>
     </div>
    </div>
    <div class="space-y-6" id="tweetFeed">
     <!-- Tweets will be dynamically added here -->
    </div>
   </div>
   <!-- Right Sidebar -->
   <div class="w-1/4 p-6">
    <div class="bg-white p-4 rounded-lg shadow mb-6">
     <h3 class="font-bold text-lg mb-4">
      What's happening
     </h3>
     <div id="trendingTweet">
      <!-- Trending tweet will be dynamically added here -->
     </div>
    </div>
   </div>
  </div>
  <script>
   document.addEventListener('DOMContentLoaded', (event) => {
        loadTweets();
        showTrendingTweet();
        loadProfileImage();
        setInterval(loadTweets, 5000); // Check for new tweets every 5 seconds
    });

    function loadTweets() {
        const tweetFeed = document.getElementById('tweetFeed');
        tweetFeed.innerHTML = '';
        const tweets = JSON.parse(localStorage.getItem('tweets')) || [];
        tweets.forEach((tweet, index) => {
            const tweetElement = document.createElement('div');
            tweetElement.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow', 'mb-6');
            tweetElement.innerHTML = `
                <div class="flex items-center mb-4">
                    <img alt="User profile picture" class="rounded-full mr-4" height="50" src="${tweet.profileImage}" width="50"/>
                    <div>
                        <h3 class="font-bold">Anonymous</h3>
                        <p class="text-gray-500">@anonymous</p>
                    </div>
                </div>
                <p class="mb-4">${tweet.content}</p>
                <div class="flex justify-between text-gray-500">
                    <i class="far fa-comment"></i>
                    <i class="fas fa-retweet"></i>
                    <i class="far fa-heart" onclick="likeTweet(${index})">${tweet.likes}</i>
                    <i class="far fa-thumbs-down" onclick="dislikeTweet(${index})">${tweet.dislikes}</i>
                    <i class="fas fa-share"></i>
                </div>
            `;
            tweetFeed.prepend(tweetElement);
        });
    }

    function postTweet() {
        const tweetContent = document.getElementById('tweetContent').value;
        const profileImage = localStorage.getItem('profileImage') || 'https://placehold.co/50x50';
        if (tweetContent.trim() === '') {
            alert('Please enter some content to tweet.');
            return;
        }

        const tweets = JSON.parse(localStorage.getItem('tweets')) || [];
        tweets.push({ content: tweetContent, likes: 0, dislikes: 0, profileImage: profileImage });
        localStorage.setItem('tweets', JSON.stringify(tweets));

        loadTweets();
        showTrendingTweet();
        document.getElementById('tweetContent').value = '';
    }

    function likeTweet(index) {
        const tweets = JSON.parse(localStorage.getItem('tweets')) || [];
        tweets[index].likes += 1;
        localStorage.setItem('tweets', JSON.stringify(tweets));
        loadTweets();
        showTrendingTweet();
    }

    function dislikeTweet(index) {
        const tweets = JSON.parse(localStorage.getItem('tweets')) || [];
        tweets[index].dislikes += 1;
        localStorage.setItem('tweets', JSON.stringify(tweets));
        loadTweets();
        showTrendingTweet();
    }

    function showHome() {
        document.getElementById('mainTitle').innerText = 'Home';
        document.getElementById('tweetBox').style.display = 'block';
        loadTweets();
    }

    function showExplore() {
        document.getElementById('mainTitle').innerText = 'Explore';
        document.getElementById('tweetBox').style.display = 'none';
        loadTweets();
    }

    function showTrendingTweet() {
        const trendingTweetDiv = document.getElementById('trendingTweet');
        const tweets = JSON.parse(localStorage.getItem('tweets')) || [];
        if (tweets.length === 0) {
            trendingTweetDiv.innerHTML = '<p>There are no tweets haha :)</p>';
            return;
        }

        const mostLikedTweet = tweets.reduce((max, tweet) => tweet.likes > max.likes ? tweet : max, tweets[0]);
        trendingTweetDiv.innerHTML = `
            <div class="flex items-center mb-4">
                <img alt="User profile picture" class="rounded-full mr-4" height="50" src="${mostLikedTweet.profileImage}" width="50"/>
                <div>
                    <h3 class="font-bold">Anonymous</h3>
                    <p class="text-gray-500">@anonymous</p>
                </div>
            </div>
            <p class="mb-4">${mostLikedTweet.content}</p>
            <div class="flex justify-between text-gray-500">
                <i class="far fa-comment"></i>
                <i class="fas fa-retweet"></i>
                <i class="far fa-heart">${mostLikedTweet.likes}</i>
                <i class="far fa-thumbs-down">${mostLikedTweet.dislikes}</i>
                <i class="fas fa-share"></i>
            </div>
        `;
    }

    function uploadProfileImage(event) {
        const reader = new FileReader();
        reader.onload = function() {
            const profileImage = reader.result;
            localStorage.setItem('profileImage', profileImage);
            document.getElementById('currentProfileImage').src = profileImage;
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    function loadProfileImage() {
        const profileImage = localStorage.getItem('profileImage') || 'https://placehold.co/50x50';
        document.getElementById('currentProfileImage').src = profileImage;
    }
  </script>
 </body>
</html>
